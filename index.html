<!DOCTYPE HTML>
<html>
<head>
  <style>
  body {
    margin: 0px;
    padding: 0px;
  }
  </style>
</head>	
<body>
  <canvas id="myCanvas" width="1000" height="600"></canvas>
  <script>
  var x =  0;
  var y = 15;
  var speed = -5;
  var grassLen=20;
  var gorgeSize=5;
  var canvas = document.getElementById('myCanvas');
  var context = canvas.getContext('2d');
  var player = new Image();

  player.onload = function() {
    context.drawImage(player, canvas.width*0.05,canvas.height*0.8-player.height);
  };
  player.src = 'player.png';

  var grassX=-10 //Least position for x ; reinitialezed in end 
  function animate() {

    reqAnimFrame = window.mozRequestAnimationFrame    ||
    window.webkitRequestAnimationFrame ||
    window.msRequestAnimationFrame     ||
    window.oRequestAnimationFrame
    ;

    reqAnimFrame(animate);

    x += speed;
   // console.log(x);

   if(x < grassX){
    x=canvas.width;
      //console.log(x+' '+grassX);
    }

    draw();
  }


  function draw() {

    var grass= new Image();
    grass.onload = function() {

     for(var i=0;i<grassLen;i++)
     {
      context.drawImage(grass,x+grass.width*i, canvas.height*0.85, grass.width,grass.height );
    }
    var lastX=grass.width*grassLen;
    context.clearRect(x+lastX,canvas.height*0.85,grass.width,grass.height);
    if(canvas.width-lastX > grass.width*gorgeSize)
    {

    }
  };
  grass.src = 'grass.png';

}

animate();
console.log("hello");
var grass=new Image();
grass.onload = function() {

  grassX=grass.width*grassLen*-1
  console.log(grassX);
};
grass.src="grass.png";
</script>
</body>
</html>      